{"headers":[{"key":"pos","value":true,"style":"boolean"},{"key":"course","value":"","style":"string"}],"items":[{"key":"courseWill","value":0,"style":"number","css":"courseWill"}],"priority":[{"key":"rankPoint","order":"desc"}],"actions":[],"global_actions":[{"name":"thru","button_css":"btn btn-default","group":"rule","keyboard":"Space","enable0":"return true;","action0":"var nextPlayer;\nvar nextPlayers = players.filter(function(p) {\n  return p.next\n});\n\nif (nextPlayers.length >= 1) {\n  nextPlayer = nextPlayers[0];\n\n  for (var i = 1; i <= 4; i++) {\n    var will = nextPlayer[\"\" + i];\n\n    // 人数オーバーの場合は次へ\n    if (players.filter(function(p) {\n        return p.course == will;\n      }).length >= property.maxCourseCount[will]) {\n      console.log(\"ng: \" + will);\n      continue;\n    }\n\n    // コースを設定\n    console.log(\"ok: \" + will);\n    nextPlayer.course = will;\n    break;\n  }\n}"},{"name":"s","enable0":"return true;","button_css":"btn btn-default","group":"rule","keyboard":"z","action0":"header.course = \"\";"},{"name":"a","button_css":"btn btn-default","group":"rule","keyboard":"x","enable0":"return true;","action0":"header.course = \"a\";"},{"name":"b","button_css":"btn btn-default","group":"rule","keyboard":"c","enable0":"return true;","action0":"header.course = \"b\";"},{"name":"c","button_css":"btn btn-default","group":"rule","keyboard":"v","enable0":"return true;","action0":"header.course = \"c\";"},{"name":"d","button_css":"btn btn-default","group":"rule","keyboard":"b","enable0":"return true;","action0":"header.course = \"d\";"}],"global_actions_repeat":[],"tweet":{},"judgement":"angular.forEach(players.filter(function(item) {\n  /* rankがない人に限定 */\n  return (item.rank === 0);\n}), function(player, i) {\n\n});","calc":"angular.forEach(players, function(player, index) {\n  // pinch, chance\n  player.pinch = false;\n  player.chance = false;\n\n  // nameLatの設定\n  player.nameLat = player.name;\n  player.handleNameLat = player.handleName;\n  player.keyIndex = 999;\n\n  // rankPoint\n  player.rankPoint = player.paperRank * 1.001 + player.rollingRank * 10;\n\n  //course\n  if (!angular.isDefined(player.course)) {\n    player.course = \"\";\n  }\n\n  // courseWill\n  if (player.course === \"\") {\n    player.courseWill =\n      player[\"paperRank\"] + \"+\" +\n      player[\"rollingRank\"] + \"*10=\" +\n      (player[\"paperRank\"] + player[\"rollingRank\"] * 10) + \" : \" +\n      player[\"1\"] + player[\"2\"] + player[\"3\"] + player[\"4\"];\n  } else {\n    player.courseWill = \"\";\n  }\n});\n\nvar nextPlayer;\nvar nextPlayers = players.filter(function(p) {\n  return p.course === \"\";\n}).sort(function(a, b) {\n  return (a.rankPoint < b.rankPoint) ? -1 : 1;\n});\n\nif (nextPlayers.length >= 1) {\n  nextPlayer = nextPlayers[0];\n}\n\n// courseName\nif (angular.isObject(property.courseName) && angular.isDefined(property.courseName[header.course])) {\n  header.courseName = property.courseName[header.course];\n} else {\n  header.courseName = \"\";\n}\n\nangular.forEach(players, function(player, index) {\n  if (header.course.length >= 1) {\n    if (player == nextPlayer) {\n      player.next = true;\n      player.line = \"left\";\n\n    } else if (player.course == header.course) {\n      var rankInCourse = players.filter(function(p) {\n        return p.course == header.course && p.rankPoint <= player.rankPoint;\n      }).length;\n      var countInCourse = players.filter(function(p) {\n        return p.course == header.course;\n      }).length;\n\n      if (rankInCourse <= countInCourse / 2) {\n        player.line = \"linea\";\n      } else {\n        player.line = \"lineb\"\n      }\n\n    } else {\n      player.line = \"left\";\n\n    }\n  } else {\n    // line\n    if (player == nextPlayer) {\n      player.next = true;\n      player.line = \"next\";\n    } else {\n      player.next = false;\n      switch (player.course) {\n        case \"\":\n          player.line = \"left\";\n          break;\n        case \"a\":\n          player.line = \"line1\";\n          break;\n        case \"b\":\n          player.line = \"line2\";\n          break;\n        case \"c\":\n          player.line = \"line3\";\n          break;\n        case \"d\":\n          player.line = \"line4\";\n          break;\n        default:\n          player.line = \"left\";\n      }\n    }\n  }\n\n});","lines":[{"key":"line1","xType":false,"yType":true,"invisible":false,"zoom":0.5,"left":0,"right":1,"top":0.3,"y":0.8,"orderBy":"rankPoint","bottom":0.9,"x":0.125},{"key":"line2","orderBy":"rankPoint","xType":false,"yType":true,"invisible":false,"zoom":0.5,"left":0.2,"right":1,"y":0.6,"top":0.3,"bottom":0.9,"x":0.375},{"key":"line3","orderBy":"rankPoint","xType":false,"yType":true,"invisible":false,"zoom":0.5,"y":0.4,"left":0.4,"right":1,"top":0.3,"bottom":0.9,"x":0.625},{"key":"line4","orderBy":"rankPoint","xType":false,"yType":true,"invisible":false,"zoom":0.5,"y":0.2,"left":0.6,"right":1,"top":0.3,"bottom":0.9,"x":0.875},{"key":"next","orderBy":"rankPoint","xType":false,"yType":false,"invisible":false,"zoom":1,"x":0.3,"y":0.2},{"key":"linea","orderBy":"rankPoint","xType":false,"yType":true,"invisible":false,"zoom":1,"x":0.25,"top":0.3,"bottom":0.9},{"key":"lineb","orderBy":"rankPoint","xType":false,"yType":true,"invisible":false,"zoom":1,"x":0.75,"top":0.3,"bottom":0.9}]}