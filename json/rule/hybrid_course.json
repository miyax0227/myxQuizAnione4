{"headers":[{"key":"pos","value":true,"style":"boolean"},{"key":"course","value":"","style":"string"}],"items":[{"key":"blaff","value":"","style":"string","css":"blaff"},{"key":"course","value":"","style":"string","css":"course"}],"priority":[{"key":"rankPoint","order":"desc"}],"actions":[],"global_actions":[],"global_actions_repeat":[{"name":"","indexes0":"return property.courseName;","enable1":"return true;","action1":"var nextPlayer;\nvar nextPlayers = players.filter(function(p) {\n  return p.next\n});\n\nif (nextPlayers.length >= 1) {\n  nextPlayer = nextPlayers[0];\n  nextPlayer.course = index;\n  nextPlayer.blaff = \"\";\n}","button_css":"btn btn-default","group":"rule","nowait":false}],"tweet":{},"judgement":"angular.forEach(players.filter(function(item) {\n  /* rankがない人に限定 */\n  return (item.rank === 0);\n}), function(player, i) {\n\n});","calc":"angular.forEach(players, function(player, index) {\n  // nameLatの設定\n  player.nameLat = player.name;\n  player.handleNameLat = player.handleName;\n  player.keyIndex = 999;\n\n  // rankPoint\n  player.rankPoint = player.position;\n\n  //course\n  if (!angular.isDefined(player.course)) {\n    player.course = \"\";\n  }\n\n});\n\nvar nextPlayer;\nvar nextPlayers = players.filter(function(p) {\n  return p.course === \"\";\n}).sort(function(a, b) {\n  return (a.rankPoint < b.rankPoint) ? -1 : 1;\n});\n\nif (nextPlayers.length >= 1) {\n  nextPlayer = nextPlayers[0];\n}\n\n// courseName\nif (angular.isObject(property.courseName) && angular.isDefined(property.courseName[header.course])) {\n  header.courseName = property.courseName[header.course];\n} else {\n  header.courseName = \"\";\n}\n\nangular.forEach(players, function(player, index) {\n  if (header.course.length >= 1) {\n    if (player == nextPlayer) {\n      player.next = true;\n      player.line = \"left\";\n\n    } else if (player.course == header.course) {\n      var rankInCourse = players.filter(function(p) {\n        return p.course == header.course && p.rankPoint <= player.rankPoint;\n      }).length;\n      var countInCourse = players.filter(function(p) {\n        return p.course == header.course;\n      }).length;\n\n      if (rankInCourse <= countInCourse / 2) {\n        player.line = \"linea\";\n      } else {\n        player.line = \"lineb\"\n      }\n\n    } else {\n      player.line = \"left\";\n\n    }\n  } else {\n    // line\n    if (player == nextPlayer) {\n      player.next = true;\n      player.line = \"next\";\n    } else {\n      player.next = false;\n      switch (player.course) {\n        case \"\":\n          player.line = \"line0\";\n          break;\n        case \"A\":\n          player.line = \"line1\";\n          break;\n        case \"B\":\n          player.line = \"line2\";\n          break;\n        case \"C\":\n          player.line = \"line3\";\n          break;\n        case \"D\":\n          player.line = \"line4\";\n          break;\n        default:\n          player.line = \"left\";\n      }\n    }\n  }\n\n});","lines":[{"key":"line1","xType":false,"yType":true,"invisible":false,"zoom":0.5,"left":0,"right":1,"top":0.3,"y":0.8,"orderBy":"rankPoint","bottom":0.7,"x":0.3},{"key":"line2","orderBy":"rankPoint","xType":false,"yType":true,"invisible":false,"zoom":0.5,"left":0.2,"right":1,"y":0.6,"top":0.3,"bottom":0.7,"x":0.5},{"key":"line3","orderBy":"rankPoint","xType":false,"yType":true,"invisible":false,"zoom":0.5,"y":0.4,"left":0.4,"right":1,"top":0.3,"bottom":0.7,"x":0.7},{"key":"line4","orderBy":"rankPoint","xType":false,"yType":true,"invisible":false,"zoom":0.5,"y":0.2,"left":0.6,"right":1,"top":0.3,"bottom":0.7,"x":0.9},{"key":"next","orderBy":"rankPoint","xType":false,"yType":false,"invisible":false,"zoom":1,"x":0.6,"y":0.2},{"key":"line0","orderBy":"rankPoint","xType":false,"yType":true,"invisible":false,"zoom":0.33,"x":0.09,"top":0.2,"bottom":0.9}]}